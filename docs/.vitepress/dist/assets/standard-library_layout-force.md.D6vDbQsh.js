import{_ as a,o as i,c as t,ag as e}from"./chunks/framework.CbQjVMS6.js";const k=JSON.parse('{"title":"layout-force","description":"","frontmatter":{"title":"layout-force"},"headers":[],"relativePath":"standard-library/layout-force.md","filePath":"standard-library/layout-force.md"}'),n={name:"standard-library/layout-force.md"};function l(o,s,r,p,h,c){return i(),t("div",null,[...s[0]||(s[0]=[e(`<div class="lib-links"> [Library directory](https://github.com/graphology/graphology/tree/master/src/layout-force) | [Changelog](https://github.com/graphology/graphology/tree/master/src/layout-force/CHANGELOG.md) </div><h1 id="graphology-force-layout" tabindex="-1">Graphology Force layout <a class="header-anchor" href="#graphology-force-layout" aria-label="Permalink to &quot;Graphology Force layout&quot;">​</a></h1><p>JavaScript implementation of a basic <a href="https://en.wikipedia.org/wiki/Force-directed_graph_drawing" target="_blank" rel="noreferrer">force directed layout algorithm</a> for <a href="/">graphology</a>.</p><p>In some few cases, for very small graphs, <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0098679" target="_blank" rel="noreferrer">ForceAtlas2</a> can be &quot;too efficient&quot;. This simpler force algorithm cannot spatialize larger networks, but will offer more organic movements which are more suited to some interactions with the graph such as drag and drop etc.</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install graphology-layout-force</span></span></code></pre></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><ul><li><a href="#pre-requisite">Pre-requisite</a></li><li><a href="#settings">Settings</a></li><li><a href="#synchronous-layout">Synchronous layout</a></li><li><a href="#supervisor">Supervisor</a></li></ul><h3 id="pre-requisites" tabindex="-1">Pre-requisites <a class="header-anchor" href="#pre-requisites" aria-label="Permalink to &quot;Pre-requisites&quot;">​</a></h3><p>Each node&#39;s starting position must be set before running the force layout algorithm. Two attributes called <code>x</code> and <code>y</code> must therefore be defined for all the graph nodes.</p><p>Note also that the algorithm has an edge-case where the layout cannot be computed if all of your nodes starts with <code>x=0</code> and <code>y=0</code>.</p><h3 id="settings" tabindex="-1">Settings <a class="header-anchor" href="#settings" aria-label="Permalink to &quot;Settings&quot;">​</a></h3><ul><li><strong>attraction</strong> <span class="code">?number</span> <span class="default">0.0005</span>: importance of the attraction force, that attracts each pair of connected nodes like elastics.</li><li><strong>repulsion</strong> <span class="code">?number</span> <span class="default">0.1</span>: importance of the repulsion force, that attracts each pair of nodes like magnets.</li><li><strong>gravity</strong> <span class="code">?number</span> <span class="default">0.0001</span>: importance of the gravity force, that attracts all nodes to the center.</li><li><strong>inertia</strong> <span class="code">?number</span> <span class="default">0.6</span>: percentage of a node vector displacement that is preserved at each step. <code>0</code> means no inertia, <code>1</code> means no friction.</li><li><strong>maxMove</strong> <span class="code">?number</span> <span class="default">200</span>: Maximum length a node can travel at each step, in pixel.</li></ul><h3 id="synchronous-layout" tabindex="-1">Synchronous layout <a class="header-anchor" href="#synchronous-layout" aria-label="Permalink to &quot;Synchronous layout&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forceLayout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;graphology-layout-force&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> positions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> forceLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, {maxIterations: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// With settings:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> positions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> forceLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  maxIterations: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  settings: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    gravity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To directly assign the positions to the nodes:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forceLayout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph);</span></span></code></pre></div><p><em>Arguments</em></p><ul><li><strong>graph</strong> <em>Graph</em>: target graph.</li><li><strong>options</strong> <em>object</em>: options: <ul><li><strong>nodeXAttribute</strong> <span class="code">?string</span> <span class="default">x</span>: name of the <code>x</code> position attribute for nodes.</li><li><strong>nodeYAttribute</strong> <span class="code">?string</span> <span class="default">y</span>: name of the <code>y</code> position attribute for edges.</li><li><strong>isNodeFixed</strong> <span class="code">?string|function</span> <span class="default">fixed</span>: name of the <code>fixed</code> attribute for nodes or a function getting a node entry (key, attributes) and returning whether the node is fixed.</li><li><strong>shouldSkipNode</strong> <span class="code">?function</span>: function returning whether the layout computations should skip this node.</li><li><strong>shouldSkipEdge</strong> <span class="code">?function</span>: function returning whether the layout computations should skip this edge.</li><li><strong>maxIterations</strong> <span class="code">?number</span> <span class="default">500</span>: maximum number of iterations to perform before stopping. Note that the algorithm will also stop as soon as converged.</li><li><strong>settings</strong> <span class="code">?object</span>: the layout&#39;s settings (see <a href="#settings">#settings</a>).</li></ul></li></ul><h3 id="supervisor" tabindex="-1">Supervisor <a class="header-anchor" href="#supervisor" aria-label="Permalink to &quot;Supervisor&quot;">​</a></h3><p>Layout supervisor relying on <a href="https://developer.mozilla.org/fr/docs/Web/API/Window/requestAnimationFrame" target="_blank" rel="noreferrer"><code>window.requestAnimationFrame</code></a> to run the layout live without hampering the UI thread.</p><p><em>Example</em></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ForceSupervisor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;graphology-layout-force/worker&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> layout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ForceSupervisor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, params);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To start the layout. It will automatically stop when converged</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To stop the layout</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To kill the layout and release attached memory and listeners</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Assess whether the layout is currently running</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isRunning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div>`,21)])])}const g=a(n,[["render",l]]);export{k as __pageData,g as default};
