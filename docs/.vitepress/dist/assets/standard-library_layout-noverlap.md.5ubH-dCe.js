import{_ as a,o as i,c as n,ag as t}from"./chunks/framework.CbQjVMS6.js";const g=JSON.parse('{"title":"layout-noverlap","description":"","frontmatter":{"title":"layout-noverlap"},"headers":[],"relativePath":"standard-library/layout-noverlap.md","filePath":"standard-library/layout-noverlap.md"}'),e={name:"standard-library/layout-noverlap.md"};function l(p,s,h,r,o,k){return i(),n("div",null,[...s[0]||(s[0]=[t(`<div class="lib-links"> [Library directory](https://github.com/graphology/graphology/tree/master/src/layout-noverlap) | [Changelog](https://github.com/graphology/graphology/tree/master/src/layout-noverlap/CHANGELOG.md) </div><h1 id="graphology-noverlap" tabindex="-1">Graphology Noverlap <a class="header-anchor" href="#graphology-noverlap" aria-label="Permalink to &quot;Graphology Noverlap&quot;">​</a></h1><p>JavaScript implementation of the Noverlap anti-collision layout algorithm for <a href="/">graphology</a>.</p><p>Note that this algorithm is iterative and might not converge easily in some cases.</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install graphology-layout-noverlap</span></span></code></pre></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><ul><li><a href="#pre-requisite">Pre-requisite</a></li><li><a href="#settings">Settings</a></li><li><a href="#synchronous-layout">Synchronous layout</a></li><li><a href="#webworker">Webworker</a></li></ul><h3 id="pre-requisites" tabindex="-1">Pre-requisites <a class="header-anchor" href="#pre-requisites" aria-label="Permalink to &quot;Pre-requisites&quot;">​</a></h3><p>Each node&#39;s starting position must be set before running the Noverlap anti-collision layout. Two attributes called <code>x</code> and <code>y</code> must therefore be defined for all the graph nodes.</p><h3 id="settings" tabindex="-1">Settings <a class="header-anchor" href="#settings" aria-label="Permalink to &quot;Settings&quot;">​</a></h3><ul><li><strong>gridSize</strong> <span class="code">?number</span> <span class="default">20</span>: number of grid cells horizontally and vertically subdivising the graph&#39;s space. This is used as an optimization scheme. Set it to <code>1</code> and you will have <code>O(n²)</code> time complexity, which can sometimes perform better with very few nodes.</li><li><strong>margin</strong> <span class="code">?number</span> <span class="default">5</span>: margin to keep between nodes.</li><li><strong>expansion</strong> <span class="code">?number</span> <span class="default">1.1</span>: percentage of current space that nodes could attempt to move outside of.</li><li><strong>ratio</strong> <span class="code">?number</span> <span class="default">1.0</span>: ratio scaling node sizes.</li><li><strong>speed</strong> <span class="code">?number</span> <span class="default">3</span>: dampening factor that will slow down node movements to ease the overall process.</li></ul><h3 id="synchronous-layout" tabindex="-1">Synchronous layout <a class="header-anchor" href="#synchronous-layout" aria-label="Permalink to &quot;Synchronous layout&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> noverlap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;graphology-layout-noverlap&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> positions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> noverlap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, {maxIterations: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// With settings:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> positions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> noverlap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  maxIterations: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  settings: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ratio: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// With a custom input reducer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> positions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> noverlap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  inputReducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x: store[key].x,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    y: store[key].y,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    size: attr.size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  outputReducer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({x: pos.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: pos.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To directly assign the positions to the nodes:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">noverlap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph);</span></span></code></pre></div><p><em>Arguments</em></p><ul><li><strong>graph</strong> <em>Graph</em>: target graph.</li><li><strong>options</strong> <em>object</em>: options: <ul><li><strong>maxIterations</strong> <span class="code">?number</span> <span class="default">500</span>: maximum number of iterations to perform before stopping. Note that the algorithm will also stop as soon as converged.</li><li><strong>inputReducer</strong> <span class="code">?function</span>: a function reducing each node attributes. This can be useful if the rendered positions/sizes of your graph are stored outside of the graph&#39;s data. This is the case when using sigma.js for instance.</li><li><strong>outputReducer</strong> <span class="code">?function</span>: a function reducing node positions as computed by the layout algorithm. This can be useful to map back to a previous coordinates system. This is the case when using sigma.js for instance.</li><li><strong>settings</strong> <span class="code">?object</span>: the layout&#39;s settings (see <a href="#settings">#settings</a>).</li></ul></li></ul><h3 id="webworker" tabindex="-1">Webworker <a class="header-anchor" href="#webworker" aria-label="Permalink to &quot;Webworker&quot;">​</a></h3><p>If you need to run the layout&#39;s computation in a web worker, the library comes with a utility to do so:</p><p><em>Example</em></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NoverlapLayout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;graphology-layout-noverlap/worker&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> layout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NoverlapLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, params);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To start the layout. It will automatically stop when converged</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To stop the layout</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To kill the layout and release attached memory</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Assess whether the layout is currently running</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isRunning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div>`,20)])])}const c=a(e,[["render",l]]);export{g as __pageData,c as default};
