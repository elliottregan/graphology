import{_ as a,o as i,c as n,ag as t}from"./chunks/framework.CbQjVMS6.js";const g=JSON.parse('{"title":"layout-forceatlas2","description":"","frontmatter":{"title":"layout-forceatlas2"},"headers":[],"relativePath":"standard-library/layout-forceatlas2.md","filePath":"standard-library/layout-forceatlas2.md"}'),e={name:"standard-library/layout-forceatlas2.md"};function l(r,s,o,h,p,k){return i(),n("div",null,[...s[0]||(s[0]=[t(`<div class="lib-links"> [Library directory](https://github.com/graphology/graphology/tree/master/src/layout-forceatlas2) | [Changelog](https://github.com/graphology/graphology/tree/master/src/layout-forceatlas2/CHANGELOG.md) </div><h1 id="graphology-forceatlas2" tabindex="-1">Graphology ForceAtlas2 <a class="header-anchor" href="#graphology-forceatlas2" aria-label="Permalink to &quot;Graphology ForceAtlas2&quot;">​</a></h1><p>JavaScript implementation of the <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0098679" target="_blank" rel="noreferrer">ForceAtlas2</a> algorithm for <a href="/">graphology</a>.</p><h2 id="reference" tabindex="-1">Reference <a class="header-anchor" href="#reference" aria-label="Permalink to &quot;Reference&quot;">​</a></h2><blockquote><p>Jacomy M, Venturini T, Heymann S, Bastian M (2014) ForceAtlas2, a Continuous Graph Layout Algorithm for Handy Network Visualization Designed for the Gephi Software. PLoS ONE 9(6): e98679. <a href="https://doi.org/10.1371/journal.pone.0098679" target="_blank" rel="noreferrer">https://doi.org/10.1371/journal.pone.0098679</a></p></blockquote><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install graphology-layout-forceatlas2</span></span></code></pre></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><ul><li><a href="#pre-requisite">Pre-requisite</a></li><li><a href="#settings">Settings</a></li><li><a href="#synchronous-layout">Synchronous layout</a></li><li><a href="#webworker">Webworker</a></li><li><a href="#infersettings">#.inferSettings</a></li></ul><h3 id="pre-requisites" tabindex="-1">Pre-requisites <a class="header-anchor" href="#pre-requisites" aria-label="Permalink to &quot;Pre-requisites&quot;">​</a></h3><p>Each node&#39;s starting position must be set before running ForceAtlas 2 layout. Two attributes called <code>x</code> and <code>y</code> must therefore be defined for all the graph nodes. <a href="/standard-library/layout">graphology-layout</a> can be used to initialize these attributes to a <a href="/standard-library/layout#random">random</a> or <a href="/standard-library/layout#circular">circular</a> layout, if needed.</p><p>Note also that the algorithm has an edge-case where the layout cannot be computed if all of your nodes starts with <code>x=0</code> and <code>y=0</code>.</p><h3 id="settings" tabindex="-1">Settings <a class="header-anchor" href="#settings" aria-label="Permalink to &quot;Settings&quot;">​</a></h3><ul><li><strong>adjustSizes</strong> <span class="code">?boolean</span> <span class="default">false</span>: should the node&#39;s sizes be taken into account?</li><li><strong>barnesHutOptimize</strong> <span class="code">?boolean</span> <span class="default">false</span>: whether to use the Barnes-Hut approximation to compute repulsion in <code>O(n*log(n))</code> rather than default <code>O(n^2)</code>, <code>n</code> being the number of nodes.</li><li><strong>barnesHutTheta</strong> <span class="code">?number</span> <span class="default">0.5</span>: Barnes-Hut approximation theta parameter.</li><li><strong>edgeWeightInfluence</strong> <span class="code">?number</span> <span class="default">1</span>: influence of the edge&#39;s weights on the layout. To consider edge weight, don&#39;t forget to pass <code>weighted</code> as <code>true</code> when applying the <a href="#synchronous-layout">synchronous layout</a> or when instantiating the <a href="#webworker">worker</a>.</li><li><strong>gravity</strong> <span class="code">?number</span> <span class="default">1</span>: strength of the layout&#39;s gravity.</li><li><strong>linLogMode</strong> <span class="code">?boolean</span> <span class="default">false</span>: whether to use Noack&#39;s LinLog model.</li><li><strong>outboundAttractionDistribution</strong> <span class="code">?boolean</span> <span class="default">false</span></li><li><strong>scalingRatio</strong> <span class="code">?number</span> <span class="default">1</span></li><li><strong>slowDown</strong> <span class="code">?number</span> <span class="default">1</span></li><li><strong>strongGravityMode</strong> <span class="code">?boolean</span> <span class="default">false</span></li></ul><h3 id="synchronous-layout" tabindex="-1">Synchronous layout <a class="header-anchor" href="#synchronous-layout" aria-label="Permalink to &quot;Synchronous layout&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forceAtlas2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;graphology-layout-forceatlas2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> positions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> forceAtlas2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, {iterations: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// With settings:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> positions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> forceAtlas2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  iterations: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  settings: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    gravity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To directly assign the positions to the nodes:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forceAtlas2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph);</span></span></code></pre></div><p><em>Arguments</em></p><ul><li><strong>graph</strong> <em>Graph</em>: target graph.</li><li><strong>options</strong> <em>object</em>: options: <ul><li><strong>iterations</strong> <em>number</em>: number of iterations to perform.</li><li><strong>getEdgeWeight</strong> <span class="code">?string|function</span> <span class="default">weight</span>: name of the edge weight attribute or getter function. Defaults to <code>weight</code>.</li><li><strong>settings</strong> <span class="code">?object</span>: the layout&#39;s settings (see <a href="#settings">#settings</a>).</li></ul></li></ul><h3 id="webworker" tabindex="-1">Webworker <a class="header-anchor" href="#webworker" aria-label="Permalink to &quot;Webworker&quot;">​</a></h3><p>If you need to run the layout&#39;s computation in a web worker, the library comes with a utility to do so:</p><p><em>Example</em></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FA2Layout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;graphology-layout-forceatlas2/worker&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// The parameters are the same as for the synchronous version, minus \`iterations\` of course</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> layout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FA2Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  settings: {gravity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To start the layout</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To stop the layout</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To kill the layout and release attached memory</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Assess whether the layout is currently running</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">layout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isRunning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p><strong>WARNING!</strong>: if you are using <a href="https://webpack.js.org/" target="_blank" rel="noreferrer"><code>webpack</code></a> to bundle your code, avoid the <code>cheap-eval</code>-like options for the <a href="https://webpack.js.org/configuration/devtool/" target="_blank" rel="noreferrer"><code>devtool</code></a> setting. Some users noticed that it interacts in mysterious ways with the library&#39;s code and cause performance to drop dramatically when using the worker. Note that this should have been fixed from v0.5.0.</p><h3 id="infersettings" tabindex="-1">#.inferSettings <a class="header-anchor" href="#infersettings" aria-label="Permalink to &quot;#.inferSettings&quot;">​</a></h3><p>If you don&#39;t know how to tune the layout&#39;s settings and want to infer them from your graph, you can use the <code>#.inferSettings</code> method:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forceAtlas2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;graphology-layout-forceatlas2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sensibleSettings</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forceAtlas2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">inferSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> positions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> forceAtlas2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(graph, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  iterations: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  settings: sensibleSettings</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Alternatively using the graph&#39;s order instead of a graph instance</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sensibleSettings</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> forceAtlas2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">inferSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div>`,26)])])}const c=a(e,[["render",l]]);export{g as __pageData,c as default};
